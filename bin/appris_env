#!/bin/bash

# -----------------------------------------------------------------------------
# Main bash script that loads environmental variable

DIRNAME=`dirname $0`
APPRIS_REL_ENV=( 'TST' 'Hsap' 'Mmus' 'Rnor' 'Drer' 'Sscr' 'Ptro' 'Dmel' 'Cele' 'Lpar' )

load_appris_specie_env() {
	local e
	for ((i=0; i < "${#APPRIS_REL_ENV[@]}"; i++)); do
		if [[ "$1" =~ "${APPRIS_REL_ENV[$i]}".* ]]
		then		
			case "${APPRIS_REL_ENV[$i]}" in
				TST* )
					CMD_SOURCE="source ${DIRNAME}/../test/conf/apprisrc.$1"
					if [ "$2" == "verbose" ]; then echo "${CMD_SOURCE}"; fi
					${CMD_SOURCE} 
					;;
				* )
					CMD_SOURCE="source ${APPRIS_SCRIPTS_CONF_DIR}/apprisrc.$1"
					if [ "$2" == "verbose" ]; then echo "${CMD_SOURCE}"; fi
					${CMD_SOURCE} 
					;;				
			esac				
		fi
	done
}

load_species_env() {
	local e
	case "$1" in
		TST* )
			CMD_SOURCE="source ${DIRNAME}/../../test/conf/apprisrc.$1"
			if [ "$2" == "verbose" ]; then echo "${CMD_SOURCE}"; fi
			${CMD_SOURCE} 
			;;
		* )
			CMD_SOURCE="source ${APPRIS_SCRIPTS_CONF_DIR}/apprisrc.$1"
			if [ "$2" == "verbose" ]; then echo "${CMD_SOURCE}"; fi
			${CMD_SOURCE} 
			;;				
	esac				
}

prepare_workspace() {
	mkdir -p $1
}